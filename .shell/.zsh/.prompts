autoload -Uz vcs_info

setopt prompt_subst

zstyle ':vcs_info:*' enable git
zstyle ':vcs_info:git*' formats "%b"
zstyle ':vcs_info:git*' actionformats "%b: %a"

function vcs_info_wrapper() {
  vcs_info
  if [[ -n $vcs_info_msg_0_ ]]
  then
    echo $'%{\e[1;37m%}%{\e[38;5;237m%}%1d ⌗ '${vcs_info_msg_0_}$'%{\e[0m%}'
  fi
}

function precmd() {
  print ''
}

# PROMPT: »»»
export PROMPT=$'%{\e[1;37;0m%}%{\e[38;5;160m%}»%{\e[38;5;208m%}»%{\e[38;5;34m%}»%{\e[0m%}  '

# PROMPT: ↳ dir-name »»»
# export PROMPT=$'%{\e[1;37m%}%{\e[38;5;242m%}↳ %1d %{\e[1;37;0m%}%{\e[38;5;160m%}»%{\e[38;5;208m%}»%{\e[38;5;34m%}»%{\e[0m%}  '

export RPROMPT=$'$(vcs_info_wrapper)'
